<!DOCTYPE html>
<html>
<head>
    <title>Test Critical Fixes</title>
</head>
<body>
    <h1>Testing Critical Fixes</h1>
    <div id="results"></div>
    
    <script src="http://localhost:8080/static/game.js"></script>
    <script>
        const results = [];
        
        // Test 1: switchToMultiSessionView function exists
        results.push({
            test: "switchToMultiSessionView exists",
            passed: typeof switchToMultiSessionView === 'function'
        });
        
        // Test 2: copyPrompt accepts event parameter
        results.push({
            test: "copyPrompt accepts event parameter",
            passed: copyPrompt.toString().includes('function copyPrompt(event)')
        });
        
        // Test 3: selectSession accepts event parameter
        results.push({
            test: "selectSession accepts event parameter",
            passed: selectSession.toString().includes('function selectSession(sessionId, event)')
        });
        
        // Test 4: queueAnimation has queue collapsing
        results.push({
            test: "queueAnimation has queue collapsing",
            passed: queueAnimation.toString().includes('animationQueue.length > 5')
        });
        
        // Test 5: queueMultiSessionAnimation has queue collapsing
        results.push({
            test: "queueMultiSessionAnimation has queue collapsing",
            passed: queueMultiSessionAnimation.toString().includes('queue.length > 5')
        });
        
        // Display results
        const resultsDiv = document.getElementById('results');
        let html = '<ul>';
        results.forEach(result => {
            const status = result.passed ? '✅' : '❌';
            const color = result.passed ? 'green' : 'red';
            html += `<li style="color: ${color}">${status} ${result.test}</li>`;
        });
        html += '</ul>';
        
        const allPassed = results.every(r => r.passed);
        html += `<h2 style="color: ${allPassed ? 'green' : 'red'}">
                   ${allPassed ? '✅ All tests passed!' : '❌ Some tests failed'}
                 </h2>`;
        
        resultsDiv.innerHTML = html;
    </script>
</body>
</html>
